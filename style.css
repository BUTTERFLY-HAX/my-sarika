* { box-sizing: border-box; }
html,body { height:100%; margin:0; }
body {
  font-family: system-ui, "Noto Sans Malayalam", "Noto Sans", Arial, sans-serif;
  background:#ececec; color:#111; font-size:12px;
}

/* top bar */
.menubar {
  display:flex; gap:14px; background:#e5e5e5; padding:6px 10px;
  border-bottom:1px solid #cfcfcf; align-items:center; position:relative;
}
.menubar .title { position:absolute; left:50%; transform:translateX(-50%); font-weight:600; }

/* layout */
.app {
  display:grid;
  grid-template-columns: 1fr 300px;
  gap:10px;
  padding:10px;
  height: calc(100vh - 66px);
}
.left {
  display:grid;
  grid-template-rows: auto 1fr auto;
  gap:10px;
  min-width:0;
}

/* passage */
.text-scroller {
  background:#fff; border:1px solid #cfcfcf; padding:10px;
  height: 300px;
  overflow: auto;
  white-space: pre-wrap; line-height:1.6; font-size:12px;
}

/* typed echo box */
.typed-echo {
  background:#fff; border:1px solid #cfcfcf; padding:10px; overflow:auto;
  white-space: pre-wrap; font-size:12px;
  height: 250px;
}
.typed-text-container {
  display: none; /* Hide this container to avoid confusion with the main scroller */
}

/* per-grapheme styling; sarika blue overlay */
.grapheme {
  --progress: 0%;
  position:relative;
  display:inline-block;      /* important for spacing + overlay */
  white-space: pre;          /* preserve spaces */
  vertical-align: baseline;
  color: #111;               /* underlying text color */
}

/* overlay showing blue + white text for typed part */
.grapheme::before {
  content: attr(data-char);
  position:absolute; left:0; top:0;
  width: var(--progress);
  height:100%;
  overflow:hidden;
  background:#2a7bd6; color:#fff;
  white-space: pre;
}

/* special: show a blue block for spaces when highlighted */
.grapheme[data-char=" "] {
  min-width: 0.6em;
  padding-left: 0.02em;
  position: relative;
}
.grapheme[data-char=" "]::before {
  /* no text for space, just block */
  content: "";
  display: block;
  left:0; top:0;
  width: var(--progress);
  height:100%;
  background:#2a7bd6;
}

/* hidden but focusable input for IME */
.capture {
  position: absolute;
  opacity: 0.01; /* focusable */
  left: -10px; top: -10px;
  width: 1px; height: 1px;
}

/* right panel */
.right {
  background:#f6f6f6; border:1px solid #cfcfcf; padding:10px; display:flex; flex-direction:column; gap:8px;
}
.row { display:flex; justify-content:space-between; gap:8px; background:#fff; border:1px solid #ddd; padding:8px; }
.label { font-weight:600; }
.val { font-variant-numeric: tabular-nums; }
.highlight { background:#d5f6d5; padding:4px 6px; border-radius:4px; }
.warn { background:#fff7c2; padding:4px 6px; border-radius:4px; }

/* buttons */
.buttons { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:6px;}
button { padding:8px; border-radius:6px; border:1px solid #bbb; background:#f0f0f0; cursor:pointer;}
button:hover{ background:#e9e9e9; }

/* timer bar */
.timerbar {
  position:fixed; left:0; right:0; bottom:0; background:#000; color:#01e6ff;
  text-align:center; font-weight:700; font-size:28px; line-height:48px; height:48px; border-top:2px solid #222;
}
